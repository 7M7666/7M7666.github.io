<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>8086 汇编系统笔记：内存分段、栈、寻址与控制转移 - &lt;/&gt;7M7&#39;s blog</title><meta name="author" content="7M7">
<meta name="description" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移（超详细） 以 8086 为例，从“内存地址怎么算”一路讲到“多字节加法”“大小写转换”。
"><meta name="keywords" content='汇编语言, 8086, Debug, 计算机组成原理'>
  <meta itemprop="name" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移">
  <meta itemprop="description" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移（超详细） 以 8086 为例，从“内存地址怎么算”一路讲到“多字节加法”“大小写转换”。">
  <meta itemprop="datePublished" content="2025-11-30T22:00:41+08:00">
  <meta itemprop="dateModified" content="2025-11-30T22:00:41+08:00">
  <meta itemprop="wordCount" content="1503">
  <meta itemprop="keywords" content="汇编语言,8086,Debug,计算机组成原理"><meta property="og:url" content="http://localhost:1313/posts/017d599/">
  <meta property="og:site_name" content="&lt;/&gt;7M7&#39;s blog">
  <meta property="og:title" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移">
  <meta property="og:description" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移（超详细） 以 8086 为例，从“内存地址怎么算”一路讲到“多字节加法”“大小写转换”。">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-30T22:00:41+08:00">
    <meta property="article:modified_time" content="2025-11-30T22:00:41+08:00">
    <meta property="article:tag" content="汇编语言">
    <meta property="article:tag" content="8086">
    <meta property="article:tag" content="Debug">
    <meta property="article:tag" content="计算机组成原理">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移">
  <meta name="twitter:description" content="8086 汇编系统笔记：内存分段、栈、寻址与控制转移（超详细） 以 8086 为例，从“内存地址怎么算”一路讲到“多字节加法”“大小写转换”。">
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/c.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" type="text/html" href="http://localhost:1313/posts/017d599/" title="8086 汇编系统笔记：内存分段、栈、寻址与控制转移 - &lt;/&gt;7M7&#39;s blog" /><link rel="prev" type="text/html" href="http://localhost:1313/posts/017d598/" title="8086 汇编 &#43; Debug 调试：TRUEAD 命令与常用指令系统笔记" /><link rel="next" type="text/html" href="http://localhost:1313/posts/017d597/" title="CSAPP Bomb Lab 详细解析与复习笔记" /><link rel="alternate" type="text/markdown" href="http://localhost:1313/posts/017d599/index.md" title="8086 汇编系统笔记：内存分段、栈、寻址与控制转移 - </>7M7's blog"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "8086 汇编系统笔记：内存分段、栈、寻址与控制转移",
    "inLanguage": "en",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/posts\/017d599\/"
    },"genre": "posts","keywords": "汇编语言, 8086, Debug, 计算机组成原理","wordcount":  1503 ,
    "url": "http:\/\/localhost:1313\/posts\/017d599\/","datePublished": "2025-11-30T22:00:41+08:00","dateModified": "2025-11-30T22:00:41+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "7M7"
      },"description": ""
  }
  </script><script src="/js/head/color-scheme.min.js"></script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper" data-github-corner="left">
    <div class="header-title">
      <a href="/" title="&lt;/&gt;7M7&#39;s blog"><img class="logo" src='/img/c.jpg' alt="&lt;/&gt;7M7&#39;s blog" height="32" width="32"><span class="header-title-text">&lt;/&gt;7M7&#39;s blog</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a class="menu-link" href="/archives/"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archives</a></li><li class="menu-item">
              <a class="menu-link" href="/categories/"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categories</a></li><li class="menu-item">
              <a class="menu-link" href="/tags/"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章.." id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="Switch Theme">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="&lt;/&gt;7M7&#39;s blog"><img class="logo" src='/img/c.jpg' alt="&lt;/&gt;7M7&#39;s blog" height="26" width="26"><span class="header-title-text">&lt;/&gt;7M7&#39;s blog</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章.." id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              Cancel
            </a>
          </li><li class="menu-item"><a class="menu-link" href="/archives/"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archives</a></li><li class="menu-item"><a class="menu-link" href="/categories/"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categories</a></li><li class="menu-item"><a class="menu-link" href="/tags/"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><nav aria-label="breadcrumb" class="breadcrumb-container sticky">
    <ol class="breadcrumb"><li class="breadcrumb-item" data-separator="&gt;"><a href="/" title="&lt;/&gt;7M7&#39;s Blog">Home</a></li><li class="breadcrumb-item" data-separator="&gt;"><a href="/posts/" title="Posts">Posts</a></li><li class="breadcrumb-item active" data-separator="&gt;" aria-current="page">8086 汇编系统笔记：内存分段、栈、寻址与控制转移</li>
    </ol>
  </nav><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Collections"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>8086 汇编系统笔记：内存分段、栈、寻址与控制转移</span>
      </h1><p class="single-subtitle animate__animated animate__fadeIn">Debug 实战指南2.0</p></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img class="avatar" src='/img/a.jpg' alt="7M7" height="16" width="16">&nbsp;7M7</span></span><span class="post-included-in">&nbsp;included in <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category" title="Category - 学习笔记"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> 学习笔记</a></span></div><div class="post-meta-line"><span title="published on 2025-11-30 22:00:41"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2025-11-30">2025-11-30</time></span>&nbsp;<span title="1503 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>About 1600 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>8 minutes</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>Contents</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#目录">目录</a></li>
    <li><a href="#1-8086-的内存分段与物理地址">1. 8086 的内存分段与物理地址</a>
      <ul>
        <li><a href="#11-分段的原因">1.1 分段的原因</a></li>
        <li><a href="#12-主要段寄存器">1.2 主要段寄存器</a></li>
      </ul>
    </li>
    <li><a href="#2-栈stack与-sssp-机制">2. 栈（Stack）与 SS:SP 机制</a>
      <ul>
        <li><a href="#21-栈相关寄存器">2.1 栈相关寄存器</a></li>
        <li><a href="#22-push-入栈">2.2 PUSH 入栈</a></li>
        <li><a href="#23-pop-出栈">2.3 POP 出栈</a></li>
        <li><a href="#24-栈空间例子10000h1000fh">2.4 栈空间例子：10000H~1000FH</a></li>
      </ul>
    </li>
    <li><a href="#3-内存寻址方式与-bxbp-规则">3. 内存寻址方式与 BX/BP 规则</a>
      <ul>
        <li><a href="#31-合法的组合规则">3.1 合法的组合规则</a></li>
        <li><a href="#32-段寄存器的默认选择规则">3.2 段寄存器的默认选择规则</a></li>
        <li><a href="#33-ds-的常见赋值错误">3.3 DS 的常见赋值错误</a></li>
      </ul>
    </li>
    <li><a href="#4-csip-与控制转移指令-jmp">4. CS:IP 与控制转移指令 JMP</a>
      <ul>
        <li><a href="#41-正常的取指令流程">4.1 正常的取指令流程</a></li>
        <li><a href="#42-jmp-指令修改-csip">4.2 JMP 指令：修改 CS/IP</a>
          <ul>
            <li><a href="#421-段内转移只改-ip">4.2.1 段内转移（只改 IP）</a></li>
            <li><a href="#422-段间转移同时改-cs-和-ip">4.2.2 段间转移（同时改 CS 和 IP）</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#5-标志寄存器-flags">5. 标志寄存器 Flags</a>
      <ul>
        <li><a href="#51-zf零标志">5.1 ZF：零标志</a></li>
        <li><a href="#52-pf奇偶标志">5.2 PF：奇偶标志</a></li>
        <li><a href="#53-sf符号标志">5.3 SF：符号标志</a></li>
        <li><a href="#54-cf--of进位-vs-溢出">5.4 CF &amp; OF：进位 vs 溢出</a></li>
      </ul>
    </li>
    <li><a href="#6-cmp-与条件转移指令-jxx">6. CMP 与条件转移指令 Jxx</a>
      <ul>
        <li><a href="#61-cmp不留结果的-sub">6.1 CMP：不留结果的 SUB</a></li>
        <li><a href="#62-常用无符号条件转移指令">6.2 常用无符号条件转移指令</a></li>
      </ul>
    </li>
    <li><a href="#7-多字节加减法adc--sbb">7. 多字节加减法：ADC / SBB</a>
      <ul>
        <li><a href="#71-adcadd-with-carry带进位加法">7.1 ADC：Add with Carry（带进位加法）</a></li>
        <li><a href="#72-sbbsubtract-with-borrow带借位减法">7.2 SBB：Subtract with Borrow（带借位减法）</a></li>
      </ul>
    </li>
    <li><a href="#8-伪指令与汇编程序骨架">8. 伪指令与汇编程序骨架</a>
      <ul>
        <li><a href="#81-常见伪指令">8.1 常见伪指令</a></li>
        <li><a href="#82-典型程序模板">8.2 典型程序模板</a></li>
      </ul>
    </li>
    <li><a href="#9-例子ascii-字符大小写转换">9. 例子：ASCII 字符大小写转换</a>
      <ul>
        <li><a href="#91-背景">9.1 背景</a></li>
        <li><a href="#92-转大写清零第-5-位and">9.2 转大写：清零第 5 位（AND）</a></li>
        <li><a href="#93-转小写将第-5-位置-1or">9.3 转小写：将第 5 位置 1（OR）</a></li>
        <li><a href="#94-扫描字符串并大小写转换的示例">9.4 扫描字符串并大小写转换的示例</a></li>
      </ul>
    </li>
    <li><a href="#10-debug-观察小技巧">10. Debug 观察小技巧</a>
      <ul>
        <li><a href="#101-查看寄存器与-flags">10.1 查看寄存器与 Flags</a></li>
        <li><a href="#102-单步跟踪栈和跳转">10.2 单步跟踪栈和跳转</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h2 class="heading-element" id="8086-汇编系统笔记内存分段栈寻址与控制转移超详细"><span>8086 汇编系统笔记：内存分段、栈、寻址与控制转移（超详细）</span>
  <a href="#8086-%e6%b1%87%e7%bc%96%e7%b3%bb%e7%bb%9f%e7%ac%94%e8%ae%b0%e5%86%85%e5%ad%98%e5%88%86%e6%ae%b5%e6%a0%88%e5%af%bb%e5%9d%80%e4%b8%8e%e6%8e%a7%e5%88%b6%e8%bd%ac%e7%a7%bb%e8%b6%85%e8%af%a6%e7%bb%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>以 8086 为例，从“内存地址怎么算”一路讲到“多字节加法”“大小写转换”。</p></blockquote>
<hr>
<h2 class="heading-element" id="目录"><span>目录</span>
  <a href="#%e7%9b%ae%e5%bd%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li><a href="#1-8086-%e7%9a%84%e5%86%85%e5%ad%98%e5%88%86%e6%ae%b5%e4%b8%8e%e7%89%a9%e7%90%86%e5%9c%b0%e5%9d%80">8086 的内存分段与物理地址</a></li>
<li><a href="#2-%e6%a0%88stack%e4%b8%8e-sssp-%e6%9c%ba%e5%88%b6">栈（Stack）与 SS:SP 机制</a></li>
<li><a href="#3-%e5%86%85%e5%ad%98%e5%af%bb%e5%9d%80%e6%96%b9%e5%bc%8f%e4%b8%8e-bxbp-%e8%a7%84%e5%88%99">内存寻址方式与 BX/BP 规则</a></li>
<li><a href="#4-csip-%e4%b8%8e%e6%8e%a7%e5%88%b6%e8%bd%ac%e7%a7%bb%e6%8c%87%e4%bb%a4-jmp">CS:IP 与控制转移指令 JMP</a></li>
<li><a href="#5-%e6%a0%87%e5%bf%97%e5%af%84%e5%ad%98%e5%99%a8-flags">标志寄存器 Flags</a></li>
<li><a href="#6-cmp-%e4%b8%8e%e6%9d%a1%e4%bb%b6%e8%bd%ac%e7%a7%bb%e6%8c%87%e4%bb%a4-jxx">CMP 与条件转移指令 Jxx</a></li>
<li><a href="#7-%e5%a4%9a%e5%ad%97%e8%8a%82%e5%8a%a0%e5%87%8f%e6%b3%95adc--sbb">多字节加减法：ADC / SBB</a></li>
<li><a href="#8-%e4%bc%aa%e6%8c%87%e4%bb%a4%e4%b8%8e%e6%b1%87%e7%bc%96%e7%a8%8b%e5%ba%8f%e9%aa%a8%e6%9e%b6">伪指令与汇编程序骨架</a></li>
<li><a href="#9-%e4%be%8b%e5%ad%90ascii-%e5%ad%97%e7%ac%a6%e5%a4%a7%e5%b0%8f%e5%86%99%e8%bd%ac%e6%8d%a2">例子：ASCII 字符大小写转换</a></li>
<li><a href="#10-debug-%e8%a7%82%e5%af%9f%e5%b0%8f%e6%8a%80%e5%b7%a7">Debug 观察小技巧</a></li>
</ol>
<hr>
<h2 class="heading-element" id="1-8086-的内存分段与物理地址"><span>1. 8086 的内存分段与物理地址</span>
  <a href="#1-8086-%e7%9a%84%e5%86%85%e5%ad%98%e5%88%86%e6%ae%b5%e4%b8%8e%e7%89%a9%e7%90%86%e5%9c%b0%e5%9d%80" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 class="heading-element" id="11-分段的原因"><span>1.1 分段的原因</span>
  <a href="#11-%e5%88%86%e6%ae%b5%e7%9a%84%e5%8e%9f%e5%9b%a0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>8086 寄存器宽度为 16 位，只能直接表示 0~65535（64KB）范围的地址。<br>
实际可访问内存是 1MB（20 位地址）。<br>
解决方案：<strong>“段地址 × 16 + 偏移地址”</strong>。</p>
<h3 class="heading-element" id="12-主要段寄存器"><span>1.2 主要段寄存器</span>
  <a href="#12-%e4%b8%bb%e8%a6%81%e6%ae%b5%e5%af%84%e5%ad%98%e5%99%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>CS</code>：Code Segment，代码段</li>
<li><code>DS</code>：Data Segment，数据段</li>
<li><code>SS</code>：Stack Segment，栈段</li>
<li><code>ES</code>：Extra Segment，附加段</li>
</ul>
<p>通用公式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">物理地址 = 段寄存器值 × 16 + 偏移地址</span></span></code></pre></td></tr></table>
</div>
</div><p>常见几种场景：</p>
<ul>
<li>访问数据：
<code>物理地址 = DS × 16 + 偏移</code></li>
<li>访问代码：
<code>物理地址 = CS × 16 + IP</code></li>
<li>使用 BX 做基址：
<code>物理地址 = DS × 16 + BX + idata</code></li>
<li>使用 BP 做基址：
<code>物理地址 = SS × 16 + BP + idata</code></li>
</ul>
<blockquote>
<p>结论：<strong>只要括号里用了 BP，默认段就是 SS；否则通常默认段是 DS。</strong></p></blockquote>
<hr>
<h2 class="heading-element" id="2-栈stack与-sssp-机制"><span>2. 栈（Stack）与 SS:SP 机制</span>
  <a href="#2-%e6%a0%88stack%e4%b8%8e-sssp-%e6%9c%ba%e5%88%b6" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>栈是一块专门区域，用来保存临时信息：返回地址、寄存器现场、局部变量等。
特点：<strong>后进先出（LIFO）</strong>。</p>
<h3 class="heading-element" id="21-栈相关寄存器"><span>2.1 栈相关寄存器</span>
  <a href="#21-%e6%a0%88%e7%9b%b8%e5%85%b3%e5%af%84%e5%ad%98%e5%99%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>SS</code>：栈段基址</li>
<li><code>SP</code>：栈顶偏移地址（单位：字节）</li>
</ul>
<p>栈顶元素的物理地址：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">栈顶物理地址 = SS × 16 + SP</span></span></code></pre></td></tr></table>
</div>
</div><p>8086 中，栈<strong>从高地址向低地址生长</strong>。</p>
<h3 class="heading-element" id="22-push-入栈"><span>2.2 PUSH 入栈</span>
  <a href="#22-push-%e5%85%a5%e6%a0%88" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>以 <code>push ax</code> 为例：</p>
<ol>
<li><code>SP = SP - 2</code> （栈顶向低地址方向移动 2 个字节）</li>
<li>将 <code>AX</code> 的 16 位内容写入到 <code>SS:SP</code> 处的内存</li>
</ol>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">1000</span><span class="no">H</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ss</span><span class="p">,</span> <span class="no">ax</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">sp</span><span class="p">,</span> <span class="mi">0010</span><span class="no">H</span>     <span class="c1">; 初始化栈空（示例）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nf">push</span> <span class="no">bx</span>           <span class="c1">; 第一次压栈，SP = 000EH
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">push</span> <span class="no">ax</span>           <span class="err">;</span> <span class="err">第二次压栈，</span><span class="no">SP</span> <span class="err">=</span> <span class="mi">000</span><span class="no">CH</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 class="heading-element" id="23-pop-出栈"><span>2.3 POP 出栈</span>
  <a href="#23-pop-%e5%87%ba%e6%a0%88" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>以 <code>pop ax</code> 为例：</p>
<ol>
<li>从 <code>SS:SP</code> 处读取 16 位数据送入 AX</li>
<li><code>SP = SP + 2</code> （栈顶向高地址方向移动 2 个字节）</li>
</ol>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">pop</span> <span class="no">ax</span>           <span class="c1">; 先把栈顶数据给 AX，SP += 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">pop</span> <span class="no">bx</span></span></span></code></pre></td></tr></table>
</div>
</div><p>说明：</p>
<ul>
<li>栈中原来的数据在内存里还存在，但逻辑上已经“无效”，下一次 <code>push</code> 会覆盖。</li>
<li>8086 不会自动检查“栈满/栈空”，越界会破坏其他数据，由程序员自己负责。</li>
</ul>
<h3 class="heading-element" id="24-栈空间例子10000h1000fh"><span>2.4 栈空间例子：10000H~1000FH</span>
  <a href="#24-%e6%a0%88%e7%a9%ba%e9%97%b4%e4%be%8b%e5%ad%9010000h1000fh" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>假设用 <code>10000H ~ 1000FH</code> 这 16 个字节作为栈区（共 16B）：</p>
<ul>
<li>栈底最高地址：<code>1000FH</code></li>
<li>栈空时约定：<strong>SP 指向栈底的下一单元</strong>，即 <code>0010H</code></li>
</ul>
<p>初始化代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">1000</span><span class="no">H</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ss</span><span class="p">,</span> <span class="no">ax</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">sp</span><span class="p">,</span> <span class="mi">0010</span><span class="no">H</span>    <span class="err">;</span> <span class="err">栈空</span></span></span></code></pre></td></tr></table>
</div>
</div><p>连续压栈时 SP 变化：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">SP = 0010H  (空栈)
</span></span><span class="line"><span class="cl">push ax  -&gt; SP = 000EH
</span></span><span class="line"><span class="cl">push bx  -&gt; SP = 000CH
</span></span><span class="line"><span class="cl">...</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 class="heading-element" id="3-内存寻址方式与-bxbp-规则"><span>3. 内存寻址方式与 BX/BP 规则</span>
  <a href="#3-%e5%86%85%e5%ad%98%e5%af%bb%e5%9d%80%e6%96%b9%e5%bc%8f%e4%b8%8e-bxbp-%e8%a7%84%e5%88%99" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>8086 中，<strong>只有 4 个寄存器可以出现在 <code>[...]</code> 内参与地址计算</strong>：</p>
<ul>
<li>BX (Base)</li>
<li>BP (Base Pointer)</li>
<li>SI (Source Index)</li>
<li>DI (Destination Index)</li>
</ul>
<h3 class="heading-element" id="31-合法的组合规则"><span>3.1 合法的组合规则</span>
  <a href="#31-%e5%90%88%e6%b3%95%e7%9a%84%e7%bb%84%e5%90%88%e8%a7%84%e5%88%99" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ol>
<li>“基址”寄存器：BX 或 BP（二选一）</li>
<li>“变址”寄存器：SI 或 DI（二选一）</li>
<li>可再加立即数 <code>idata</code></li>
</ol>
<p>合法示例（✅）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bx</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="no">si</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="no">di</span><span class="err">+</span><span class="no">idata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bp</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bp</span><span class="err">+</span><span class="no">si</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bp</span><span class="err">+</span><span class="no">di</span><span class="err">+</span><span class="no">idata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">si</span><span class="err">+</span><span class="no">idata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="nf">di</span><span class="p">]</span></span></span></code></pre></td></tr></table>
</div>
</div><p>非法示例（❌）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="no">bp</span><span class="p">]</span>    <span class="c1">; 两个基址寄存器，不允许
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">[</span><span class="nf">si</span><span class="err">+</span><span class="no">di</span><span class="p">]</span>    <span class="c1">; 两个变址寄存器，不允许
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">[</span><span class="nf">ax</span><span class="p">]</span>       <span class="err">;</span> <span class="no">AX</span> <span class="err">不能直接用于内存寻址</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 class="heading-element" id="32-段寄存器的默认选择规则"><span>3.2 段寄存器的默认选择规则</span>
  <a href="#32-%e6%ae%b5%e5%af%84%e5%ad%98%e5%99%a8%e7%9a%84%e9%bb%98%e8%ae%a4%e9%80%89%e6%8b%a9%e8%a7%84%e5%88%99" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>只要地址表达式中出现了 <code>BP</code>，默认段寄存器 = <code>SS</code></li>
<li>否则（使用 BX、SI、DI 等），默认段寄存器 = <code>DS</code></li>
</ul>
<p>对应的物理地址公式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mov ax, [bx+idata]  ; 物理地址 = DS × 16 + BX + idata
</span></span><span class="line"><span class="cl">mov ax, [bp+idata]  ; 物理地址 = SS × 16 + BP + idata</span></span></code></pre></td></tr></table>
</div>
</div><p>可以强制指定段前缀：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="no">ds</span><span class="p">:[</span><span class="no">bp</span><span class="p">]</span>     <span class="c1">; 强制使用 DS 段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="no">ss</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>     <span class="err">;</span> <span class="err">强制使用</span> <span class="no">SS</span> <span class="err">段</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 class="heading-element" id="33-ds-的常见赋值错误"><span>3.3 DS 的常见赋值错误</span>
  <a href="#33-ds-%e7%9a%84%e5%b8%b8%e8%a7%81%e8%b5%8b%e5%80%bc%e9%94%99%e8%af%af" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>段寄存器不能直接接立即数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ds</span><span class="p">,</span> <span class="mi">1000</span><span class="no">H</span>   <span class="err">;</span> <span class="err">❌</span> <span class="err">错误</span></span></span></code></pre></td></tr></table>
</div>
</div><p>正确做法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">1000</span><span class="no">H</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ds</span><span class="p">,</span> <span class="no">ax</span>      <span class="err">;</span> <span class="err">✅</span> <span class="err">先通过通用寄存器中转</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 class="heading-element" id="4-csip-与控制转移指令-jmp"><span>4. CS:IP 与控制转移指令 JMP</span>
  <a href="#4-csip-%e4%b8%8e%e6%8e%a7%e5%88%b6%e8%bd%ac%e7%a7%bb%e6%8c%87%e4%bb%a4-jmp" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 class="heading-element" id="41-正常的取指令流程"><span>4.1 正常的取指令流程</span>
  <a href="#41-%e6%ad%a3%e5%b8%b8%e7%9a%84%e5%8f%96%e6%8c%87%e4%bb%a4%e6%b5%81%e7%a8%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>8086 执行一条指令大致流程：</p>
<ol>
<li>从 <code>CS:IP</code> 指向的内存单元取指令到指令缓冲器</li>
<li><code>IP = IP + 指令长度</code>，指向下一条指令</li>
<li>执行缓冲器中的指令</li>
</ol>
<p>只要 <strong>不修改 CS 和 IP</strong>，程序就按照内存中的顺序向前执行。</p>
<h3 class="heading-element" id="42-jmp-指令修改-csip"><span>4.2 JMP 指令：修改 CS/IP</span>
  <a href="#42-jmp-%e6%8c%87%e4%bb%a4%e4%bf%ae%e6%94%b9-csip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><code>jmp</code> 的本质是：修改 <code>CS</code>、<code>IP</code> 或其中之一。</p>
<h4 class="heading-element" id="421-段内转移只改-ip"><span>4.2.1 段内转移（只改 IP）</span>
  <a href="#421-%e6%ae%b5%e5%86%85%e8%bd%ac%e7%a7%bb%e5%8f%aa%e6%94%b9-ip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">jmp</span> <span class="no">ax</span>      <span class="c1">; IP = AX
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">jmp</span> <span class="no">bx</span>      <span class="err">;</span> <span class="no">IP</span> <span class="err">=</span> <span class="no">BX</span></span></span></code></pre></td></tr></table>
</div>
</div><p>段寄存器 CS 不变。</p>
<p>也可以写成“相对跳转”的形式（编译器生成偏移量）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">jmp</span> <span class="no">short</span> <span class="no">label</span>
</span></span><span class="line"><span class="cl"><span class="nf">jmp</span> <span class="no">near</span>  <span class="no">label</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 class="heading-element" id="422-段间转移同时改-cs-和-ip"><span>4.2.2 段间转移（同时改 CS 和 IP）</span>
  <a href="#422-%e6%ae%b5%e9%97%b4%e8%bd%ac%e7%a7%bb%e5%90%8c%e6%97%b6%e6%94%b9-cs-%e5%92%8c-ip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">jmp</span> <span class="err">段地址</span><span class="p">:</span><span class="err">偏移</span></span></span></code></pre></td></tr></table>
</div>
</div><p>例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">jmp</span> <span class="mi">1000</span><span class="p">:</span><span class="mi">0003</span>   <span class="err">;</span> <span class="no">CS</span> <span class="err">=</span> <span class="mi">1000</span><span class="no">H</span><span class="p">,</span> <span class="no">IP</span> <span class="err">=</span> <span class="mi">0003</span><span class="no">H</span></span></span></code></pre></td></tr></table>
</div>
</div><p>执行后下一条指令来自物理地址：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">物理地址 = 1000H × 16 + 0003H = 10003H</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 class="heading-element" id="5-标志寄存器-flags"><span>5. 标志寄存器 Flags</span>
  <a href="#5-%e6%a0%87%e5%bf%97%e5%af%84%e5%ad%98%e5%99%a8-flags" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>标志寄存器并不存普通数据，而是存放各种“状态位”。</p>
<p>常用标志位及含义：</p>
<ul>
<li><code>ZF</code>（Zero Flag）零标志：结果是否为 0</li>
<li><code>PF</code>（Parity Flag）奇偶标志：低 8 位中 1 的个数是奇数/偶数</li>
<li><code>SF</code>（Sign Flag）符号标志：结果最高位（符号位）</li>
<li><code>CF</code>（Carry Flag）进位标志：无符号运算中进位 / 借位</li>
<li><code>OF</code>（Overflow Flag）溢出标志：有符号运算中是否溢出</li>
</ul>
<blockquote>
<p>传送类指令（mov/push/pop 等）一般不影响标志位；
算术逻辑指令（add/sub/and/or/xor/cmp 等）会影响标志位。</p></blockquote>
<h3 class="heading-element" id="51-zf零标志"><span>5.1 ZF：零标志</span>
  <a href="#51-zf%e9%9b%b6%e6%a0%87%e5%bf%97" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>结果为 0 → <code>ZF = 1</code></li>
<li>结果不为 0 → <code>ZF = 0</code></li>
</ul>
<p>在调试器中通常显示为：</p>
<ul>
<li><code>ZR</code>（Zero）表示 ZF=1</li>
<li><code>NZ</code>（Not Zero）表示 ZF=0</li>
</ul>
<h3 class="heading-element" id="52-pf奇偶标志"><span>5.2 PF：奇偶标志</span>
  <a href="#52-pf%e5%a5%87%e5%81%b6%e6%a0%87%e5%bf%97" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>对“结果的低 8 位”统计 1 的个数：</p>
<ul>
<li>若 1 的个数为偶数 → <code>PF = 1</code>（Parity Even，PE）</li>
<li>若 1 的个数为奇数 → <code>PF = 0</code>（Parity Odd，PO）</li>
</ul>
<p>记忆：<strong>P E = Parity Even = PF=1</strong></p>
<h3 class="heading-element" id="53-sf符号标志"><span>5.3 SF：符号标志</span>
  <a href="#53-sf%e7%ac%a6%e5%8f%b7%e6%a0%87%e5%bf%97" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>
<p>把结果的最高有效位复制给 SF：</p>
<ul>
<li>最高位 = 1 → SF=1（负数）</li>
<li>最高位 = 0 → SF=0（非负）</li>
</ul>
</li>
</ul>
<p>CPU 不关心你把数据当有符号还是无符号，它总是设置 SF。
是否使用 SF 取决于程序逻辑。</p>
<h3 class="heading-element" id="54-cf--of进位-vs-溢出"><span>5.4 CF &amp; OF：进位 vs 溢出</span>
  <a href="#54-cf--of%e8%bf%9b%e4%bd%8d-vs-%e6%ba%a2%e5%87%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><strong>CF</strong></p>
<ul>
<li>下溢 / 借位（无符号减法） → <code>CF = 1</code></li>
<li>加法最高位产生进位（无符号加法） → <code>CF = 1</code></li>
</ul>
<p><strong>OF</strong></p>
<ul>
<li>
<p>针对有符号数：</p>
<ul>
<li>正 + 正 → 得到负 → <code>OF = 1</code></li>
<li>负 + 负 → 得到正 → <code>OF = 1</code></li>
</ul>
</li>
<li>
<p>其它情况下 OF 一般为 0</p>
</li>
</ul>
<p>例：8 位寄存器 AL 中执行 <code>98 + 99</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">al</span><span class="p">,</span> <span class="mi">98</span>
</span></span><span class="line"><span class="cl"><span class="nf">add</span> <span class="no">al</span><span class="p">,</span> <span class="mi">99</span></span></span></code></pre></td></tr></table>
</div>
</div><p>二进制：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">0110 0010 (98)
</span></span><span class="line"><span class="cl">+0110 0011 (99)
</span></span><span class="line"><span class="cl">-----------
</span></span><span class="line"><span class="cl">1100 0101 (结果)</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>作为无符号数：范围 0~255，结果 197，没越界 → CF=0</li>
<li>作为有符号数：98、99 都是正数，结果最高位为 1（负数）
正 + 正 得到负数 → 溢出 → OF=1</li>
</ul>
<p>结论：同一条指令，CF、OF 的含义取决于你是按无符号还是按有符号来解释。</p>
<hr>
<h2 class="heading-element" id="6-cmp-与条件转移指令-jxx"><span>6. CMP 与条件转移指令 Jxx</span>
  <a href="#6-cmp-%e4%b8%8e%e6%9d%a1%e4%bb%b6%e8%bd%ac%e7%a7%bb%e6%8c%87%e4%bb%a4-jxx" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 class="heading-element" id="61-cmp不留结果的-sub"><span>6.1 CMP：不留结果的 SUB</span>
  <a href="#61-cmp%e4%b8%8d%e7%95%99%e7%bb%93%e6%9e%9c%e7%9a%84-sub" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">cmp</span> <span class="no">ax</span><span class="p">,</span> <span class="no">bx</span></span></span></code></pre></td></tr></table>
</div>
</div><p>本质上等价于：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">临时 = ax - bx
</span></span><span class="line"><span class="cl">; 只根据这个结果更新 Flags，不把临时写回</span></span></code></pre></td></tr></table>
</div>
</div><p>根据结果不同，Flags 的典型变化：</p>
<ul>
<li>若 <code>(ax) = (bx)</code> → 结果为 0 → <code>ZF = 1</code></li>
<li>若 <code>(ax) &lt; (bx)</code>（无符号） → 借位 → <code>CF = 1</code></li>
<li>若 <code>(ax) &gt; (bx)</code>（无符号） → 无借位且不为 0 → <code>CF=0, ZF=0</code></li>
</ul>
<h3 class="heading-element" id="62-常用无符号条件转移指令"><span>6.2 常用无符号条件转移指令</span>
  <a href="#62-%e5%b8%b8%e7%94%a8%e6%97%a0%e7%ac%a6%e5%8f%b7%e6%9d%a1%e4%bb%b6%e8%bd%ac%e7%a7%bb%e6%8c%87%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>以下几条通常配合 <code>cmp</code> 使用：</p>
<ul>
<li><code>je / jz</code>：等于（ZF = 1）</li>
<li><code>jne / jnz</code>：不等于（ZF = 0）</li>
<li><code>jb / jc</code>：below / carry，小于（无符号，CF = 1）</li>
<li><code>ja</code>：above，大于（无符号，CF = 0 且 ZF = 0）</li>
<li><code>jbe</code>：below or equal，小于等于（CF = 1 或 ZF = 1）</li>
<li><code>jae / jnc</code>：above or equal，大于等于（CF = 0）</li>
</ul>
<p>简单示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">cmp</span> <span class="no">ax</span><span class="p">,</span> <span class="no">bx</span>
</span></span><span class="line"><span class="cl"><span class="nf">ja</span>  <span class="no">bigger</span>     <span class="c1">; 若 ax &gt; bx（无符号）跳转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">jb</span>  <span class="no">smaller</span>    <span class="c1">; 若 ax &lt; bx
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">je</span>  <span class="no">equal</span>      <span class="err">;</span> <span class="err">若</span> <span class="no">ax</span> <span class="err">==</span> <span class="no">bx</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 class="heading-element" id="7-多字节加减法adc--sbb"><span>7. 多字节加减法：ADC / SBB</span>
  <a href="#7-%e5%a4%9a%e5%ad%97%e8%8a%82%e5%8a%a0%e5%87%8f%e6%b3%95adc--sbb" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>16 位寄存器最多表示 0<sub>65535（或有符号 -32768</sub>32767）。
要处理 32 位、64 位、128 位等更大整数，就需要“拆分 + 进位/借位传递”。</p>
<p>核心：利用 <code>CF</code> 作为进位/借位在多字之间传递。</p>
<h3 class="heading-element" id="71-adcadd-with-carry带进位加法"><span>7.1 ADC：Add with Carry（带进位加法）</span>
  <a href="#71-adcadd-with-carry%e5%b8%a6%e8%bf%9b%e4%bd%8d%e5%8a%a0%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">adc</span> <span class="no">dest</span><span class="p">,</span> <span class="no">src</span>   <span class="err">;</span> <span class="no">dest</span> <span class="err">=</span> <span class="no">dest</span> <span class="err">+</span> <span class="no">src</span> <span class="err">+</span> <span class="no">CF</span></span></span></code></pre></td></tr></table>
</div>
</div><p>典型场景：两个 32 位数相加（每个拆为“高 16 位 + 低 16 位”）。</p>
<p>低地址存低位：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">; 假设：
</span></span></span><span class="line"><span class="cl"><span class="c1">;   [si]   = A 的低 16 位
</span></span></span><span class="line"><span class="cl"><span class="c1">;   [si+2] = A 的高 16 位
</span></span></span><span class="line"><span class="cl"><span class="c1">;   [di]   = B 的低 16 位
</span></span></span><span class="line"><span class="cl"><span class="c1">;   [di+2] = B 的高 16 位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nf">sub</span> <span class="no">ax</span><span class="p">,</span> <span class="no">ax</span>        <span class="c1">; ax = 0，同时 CF = 0，清进位（关键一步）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">; --- 低 16 位 ---
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="p">[</span><span class="no">si</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nf">adc</span> <span class="no">ax</span><span class="p">,</span> <span class="p">[</span><span class="no">di</span><span class="p">]</span>      <span class="c1">; ax = A_low + B_low + CF(0)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mov</span> <span class="p">[</span><span class="no">si</span><span class="p">],</span> <span class="no">ax</span>      <span class="c1">; 存回 A 的低位，也可以存到别处
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">; --- 高 16 位 ---
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="p">[</span><span class="no">si</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nf">adc</span> <span class="no">ax</span><span class="p">,</span> <span class="p">[</span><span class="no">di</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>    <span class="c1">; ax = A_high + B_high + 上一步产生的 CF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mov</span> <span class="p">[</span><span class="no">si</span><span class="err">+</span><span class="mi">2</span><span class="p">],</span> <span class="no">ax</span></span></span></code></pre></td></tr></table>
</div>
</div><p>注意事项：</p>
<ul>
<li>必须<strong>在第一轮之前手动清 CF</strong>（例如用 <code>sub ax, ax</code> 或 <code>clc</code>）。</li>
<li>在连续 <code>adc</code> 过程中，不能夹入会修改 CF 的指令（如 <code>add/sub/cmp</code> 等）。
但 <code>inc/dec/loop</code> 等不会改 CF，可以安全使用。</li>
</ul>
<h3 class="heading-element" id="72-sbbsubtract-with-borrow带借位减法"><span>7.2 SBB：Subtract with Borrow（带借位减法）</span>
  <a href="#72-sbbsubtract-with-borrow%e5%b8%a6%e5%80%9f%e4%bd%8d%e5%87%8f%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">sbb</span> <span class="no">dest</span><span class="p">,</span> <span class="no">src</span>   <span class="err">;</span> <span class="no">dest</span> <span class="err">=</span> <span class="no">dest</span> <span class="p">-</span> <span class="no">src</span> <span class="p">-</span> <span class="no">CF</span></span></span></code></pre></td></tr></table>
</div>
</div><p>用法与 ADC 类似，用来实现多字节减法的“高位减法”，CF 用来传递借位。</p>
<hr>
<h2 class="heading-element" id="8-伪指令与汇编程序骨架"><span>8. 伪指令与汇编程序骨架</span>
  <a href="#8-%e4%bc%aa%e6%8c%87%e4%bb%a4%e4%b8%8e%e6%b1%87%e7%bc%96%e7%a8%8b%e5%ba%8f%e9%aa%a8%e6%9e%b6" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>汇编源文件中有两种东西：</p>
<ol>
<li><strong>机器指令</strong>：由 CPU 执行（mov、add、sub、jmp、push 等）</li>
<li><strong>伪指令</strong>：只被汇编器处理，没有机器码（segment、ends、assume、end 等）</li>
</ol>
<h3 class="heading-element" id="81-常见伪指令"><span>8.1 常见伪指令</span>
  <a href="#81-%e5%b8%b8%e8%a7%81%e4%bc%aa%e6%8c%87%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>segment / ends</code>：定义某个段的开始与结束</li>
<li><code>assume</code>：告诉汇编器，“某个段寄存器对应哪个段名”</li>
<li><code>end</code>：标记源程序结束，通常同时给出程序入口标号</li>
</ul>
<h3 class="heading-element" id="82-典型程序模板"><span>8.2 典型程序模板</span>
  <a href="#82-%e5%85%b8%e5%9e%8b%e7%a8%8b%e5%ba%8f%e6%a8%a1%e6%9d%bf" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">assume</span> <span class="no">cs</span><span class="p">:</span><span class="no">codesg</span><span class="p">,</span> <span class="no">ds</span><span class="p">:</span><span class="no">datasg</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">datasg</span> <span class="no">segment</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; 数据定义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">msg</span> <span class="no">db</span> <span class="err">&#39;</span><span class="no">Hello</span><span class="p">,</span> <span class="no">world</span><span class="p">!</span><span class="no">$</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">datasg</span> <span class="no">ends</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">codesg</span> <span class="no">segment</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">start:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; 初始化数据段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="no">datasg</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="no">ds</span><span class="p">,</span> <span class="no">ax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; 程序主体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">mov</span> <span class="no">dx</span><span class="p">,</span> <span class="no">offset</span> <span class="no">msg</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="no">ah</span><span class="p">,</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl">    <span class="nf">int</span> <span class="mi">21</span><span class="no">H</span>          <span class="c1">; DOS 打印字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">; 正常返回 DOS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">4</span><span class="no">c00H</span>
</span></span><span class="line"><span class="cl">    <span class="nf">int</span> <span class="mi">21</span><span class="no">H</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">codesg</span> <span class="no">ends</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">end</span> <span class="no">start</span></span></span></code></pre></td></tr></table>
</div>
</div><p>说明：</p>
<ul>
<li><code>assume</code> 只是给汇编器看的“假设”，不会生成机器码。</li>
<li>运行时仍然需要代码（如 <code>mov ax, datasg / mov ds, ax</code>）真正设置段寄存器。</li>
<li><code>end start</code> 不仅告诉汇编器“到此结束”，还指定程序入口是 <code>start</code> 标号处。</li>
</ul>
<hr>
<h2 class="heading-element" id="9-例子ascii-字符大小写转换"><span>9. 例子：ASCII 字符大小写转换</span>
  <a href="#9-%e4%be%8b%e5%ad%90ascii-%e5%ad%97%e7%ac%a6%e5%a4%a7%e5%b0%8f%e5%86%99%e8%bd%ac%e6%8d%a2" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>ASCII 中英文字母大小写有固定的位模式差异，可通过位运算实现大小写转换。</p>
<h3 class="heading-element" id="91-背景"><span>9.1 背景</span>
  <a href="#91-%e8%83%8c%e6%99%af" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>'A' = 41H = 0100 0001B</code></li>
<li><code>'a' = 61H = 0110 0001B</code></li>
</ul>
<p>差值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">0110 0001B
</span></span><span class="line"><span class="cl">0100 0001B
</span></span><span class="line"><span class="cl">----------
</span></span><span class="line"><span class="cl">0010 0000B = 20H</span></span></code></pre></td></tr></table>
</div>
</div><p>也就是说：<strong>小写字母 = 大写字母 + 20H</strong>。
对应到二进制，就是第 5 位（从 0 开始数）不同：</p>
<ul>
<li>小写字母：bit5 = 1</li>
<li>大写字母：bit5 = 0</li>
</ul>
<h3 class="heading-element" id="92-转大写清零第-5-位and"><span>9.2 转大写：清零第 5 位（AND）</span>
  <a href="#92-%e8%bd%ac%e5%a4%a7%e5%86%99%e6%b8%85%e9%9b%b6%e7%ac%ac-5-%e4%bd%8dand" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>要把小写转成大写，需要把该位从 1 改为 0，其它位不变。
采用 AND 掩码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">原：0110 0001 (a)
</span></span><span class="line"><span class="cl">掩：1101 1111 (DFH)
</span></span><span class="line"><span class="cl">AND:
</span></span><span class="line"><span class="cl">   0100 0001 (A)</span></span></code></pre></td></tr></table>
</div>
</div><p>实现代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">; al 中是小写字母
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">and</span> <span class="no">al</span><span class="p">,</span> <span class="mi">11011111</span><span class="no">B</span>     <span class="c1">; 或 and al, 0DFH
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">;</span> <span class="nf">al</span> <span class="err">变成对应大写</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 class="heading-element" id="93-转小写将第-5-位置-1or"><span>9.3 转小写：将第 5 位置 1（OR）</span>
  <a href="#93-%e8%bd%ac%e5%b0%8f%e5%86%99%e5%b0%86%e7%ac%ac-5-%e4%bd%8d%e7%bd%ae-1or" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>把大写变成小写：只需把 bit5 置 1。
采用 OR 掩码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">原：0100 0001 (A)
</span></span><span class="line"><span class="cl">掩：0010 0000 (20H)
</span></span><span class="line"><span class="cl">OR:
</span></span><span class="line"><span class="cl">   0110 0001 (a)</span></span></code></pre></td></tr></table>
</div>
</div><p>实现代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">; al 中是大写字母
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">or</span> <span class="no">al</span><span class="p">,</span> <span class="mi">00100000</span><span class="no">B</span>      <span class="c1">; 或 or al, 20H
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">;</span> <span class="nf">al</span> <span class="err">变成对应小写</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 class="heading-element" id="94-扫描字符串并大小写转换的示例"><span>9.4 扫描字符串并大小写转换的示例</span>
  <a href="#94-%e6%89%ab%e6%8f%8f%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%b9%b6%e5%a4%a7%e5%b0%8f%e5%86%99%e8%bd%ac%e6%8d%a2%e7%9a%84%e7%a4%ba%e4%be%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>若内存中有一段以 0 结尾的字符串：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">datasg</span> <span class="no">segment</span>
</span></span><span class="line"><span class="cl">    <span class="nf">str</span> <span class="no">db</span> <span class="err">&#39;</span><span class="no">AbCdEfG</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">datasg</span> <span class="no">ends</span></span></span></code></pre></td></tr></table>
</div>
</div><p>将全部字符转为大写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="no">datasg</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ds</span><span class="p">,</span> <span class="no">ax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">si</span><span class="p">,</span> <span class="no">offset</span> <span class="no">str</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">convert_loop:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="no">al</span><span class="p">,</span> <span class="p">[</span><span class="no">si</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="no">al</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="nf">je</span>  <span class="no">done</span>          <span class="c1">; 遇到 0 结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">; 仅对小写字母操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">cmp</span> <span class="no">al</span><span class="p">,</span> <span class="err">&#39;</span><span class="no">a</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jb</span>  <span class="no">skip</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="no">al</span><span class="p">,</span> <span class="err">&#39;</span><span class="no">z</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ja</span>  <span class="no">skip</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">and</span> <span class="no">al</span><span class="p">,</span> <span class="mi">11011111</span><span class="no">B</span> <span class="c1">; 变成大写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">mov</span> <span class="p">[</span><span class="no">si</span><span class="p">],</span> <span class="no">al</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">skip:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="no">si</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jmp</span> <span class="no">convert_loop</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">done:</span>
</span></span><span class="line"><span class="cl">    <span class="err">;</span> <span class="na">...</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 class="heading-element" id="10-debug-观察小技巧"><span>10. Debug 观察小技巧</span>
  <a href="#10-debug-%e8%a7%82%e5%af%9f%e5%b0%8f%e6%8a%80%e5%b7%a7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>使用 DOS / Debug 或类似调试器时，可以通过命令观察寄存器和标志位变化。</p>
<h3 class="heading-element" id="101-查看寄存器与-flags"><span>10.1 查看寄存器与 Flags</span>
  <a href="#101-%e6%9f%a5%e7%9c%8b%e5%af%84%e5%ad%98%e5%99%a8%e4%b8%8e-flags" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>常用命令：<code>r</code></p>
<p>输出中右下角通常是标志位的简写，例如：</p>
<ul>
<li><code>NZ</code> / <code>ZR</code>：ZF = 0 / 1</li>
<li><code>PO</code> / <code>PE</code>：PF = 0 / 1</li>
<li><code>PL</code> / <code>NG</code>：SF = 0（Plus）/ 1（Negative）</li>
<li><code>NC</code> / <code>CY</code>：CF = 0（No Carry）/ 1（Carry）</li>
</ul>
<h3 class="heading-element" id="102-单步跟踪栈和跳转"><span>10.2 单步跟踪栈和跳转</span>
  <a href="#102-%e5%8d%95%e6%ad%a5%e8%b7%9f%e8%b8%aa%e6%a0%88%e5%92%8c%e8%b7%b3%e8%bd%ac" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>
<p>执行 <code>t</code>（trace）或 <code>p</code>（step）观察：</p>
<ul>
<li><code>CS:IP</code> 如何随 <code>jmp/call/ret</code> 等指令变化</li>
<li><code>SS:SP</code> 如何随 <code>push/pop</code> 变化</li>
<li>算术运算后，Flags 的变化是否符合预期</li>
</ul>
</li>
</ul>
<p>示例：单步观察 <code>push ax / pop ax</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">1000</span><span class="no">H</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ss</span><span class="p">,</span> <span class="no">ax</span>
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">sp</span><span class="p">,</span> <span class="mi">0010</span><span class="no">H</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">mov</span> <span class="no">ax</span><span class="p">,</span> <span class="mi">1234</span><span class="no">H</span>
</span></span><span class="line"><span class="cl"><span class="nf">push</span> <span class="no">ax</span>      <span class="c1">; 观察 SP = 000EH，内存 [SS:000EH] = 34H, [SS:000FH] = 12H
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">pop</span> <span class="no">bx</span>       <span class="err">;</span> <span class="err">观察</span> <span class="no">BX</span> <span class="err">=</span> <span class="mi">1234</span><span class="no">H</span><span class="err">，</span><span class="no">SP</span> <span class="err">回到</span> <span class="mi">0010</span><span class="no">H</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在 debug 中逐步执行并配合 <code>d</code> 命令查看相关内存，可以帮助直观理解栈的方向和 PUSH/POP 的行为。</p>
<hr>
<blockquote>
<p>至此，一条完整知识线已经建立：
<strong>物理地址与分段 → 栈和 BP/BX 寻址 → CS:IP 与 JMP → Flags → CMP/Jxx → 多字节运算 → 实战例子（大小写转换）</strong>。
复习时可以按章节跳读，重点记住：</p>
<ul>
<li>地址公式与 BP/SS 默认绑定</li>
<li>PUSH/POP 对 SP 的影响</li>
<li>CF/OF 区分（无符号 / 有符号）</li>
<li>ADC/SBB 多字节运算套路</li>
<li>ASCII 大小写转换的 AND/OR 掩码。</li>
</ul></blockquote>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="Updated on 2025-11-30 22:00:41">Updated on 2025-11-30&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"><span><a href="/posts/017d599/index.md" title="Read Markdown" class="link-to-markdown">Read Markdown</a></span><span><a href="vscode://file/W:%5ctool%5cblog%5c7M7%5ccontent%5cposts%5c%e6%b1%87%e7%bc%96%e7%ac%94%e8%ae%b02.0.md" title="Open in editor"target="_blank" rel="external nofollow noopener noreferrer" class="link-to-vscode">Open in editor</a></span></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/017d599/" data-title="8086 汇编系统笔记：内存分段、栈、寻址与控制转移"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/" class="post-tag" title="Tags - 汇编语言">汇编语言</a><a href="/tags/8086/" class="post-tag" title="Tags - 8086">8086</a><a href="/tags/debug/" class="post-tag" title="Tags - Debug">Debug</a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="post-tag" title="Tags - 计算机组成原理">计算机组成原理</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
    </section>
  </div><div class="post-nav"><a href="/posts/017d598/" class="post-nav-item" rel="prev" title="8086 汇编 &#43; Debug 调试：TRUEAD 命令与常用指令系统笔记"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>8086 汇编 &#43; Debug 调试：TRUEAD 命令与常用指令系统笔记</a><a href="/posts/017d597/" class="post-nav-item" rel="next" title="CSAPP Bomb Lab 详细解析与复习笔记">CSAPP Bomb Lab 详细解析与复习笔记<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="Contents"><h2 class="toc-title">Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.150.0"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> | Theme - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.20">FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2025</span><span class="author" itemprop="copyrightHolder">
              <a href="/">7M7</a></span></div><div class="footer-line visitor">
          <span id="busuanzi_container_site_uv" title='Total visitors'><i class="fa-regular fa-user fa-fw me-1" aria-hidden="true"></i><span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span><span id="busuanzi_container_site_pv" class="footer-divider" title='Total visits'><i class="fa-regular fa-eye fa-fw me-1" aria-hidden="true"></i><span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span>
        </div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><a href="https://github.com/7M7666" title="View me on GitHub"target="_blank" rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true" width="56" height="56"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><div id="mask"></div><noscript>
    <div class="noscript-warning">This website works best with JavaScript enabled.</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><link rel="stylesheet" href="/lib/pace/themes/black/pace-theme-minimal.css"><link rel="stylesheet" href="/css/custom.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="/lib/pangu/pangu.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"code":{"copyTitle":"Copy to clipboard","editLockTitle":"Lock editable code block","editUnLockTitle":"Unlock editable code block","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"pangu":{"enable":true,"selector":"article"},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/search.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"No results found","snippetLength":30,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"version":"v0.3.20"};console.log('Page config:', window.config);</script><script src="/js/theme.min.js" defer></script><script src="/js/custom.min.js" defer></script></body>
</html>
